# üñ• Linux Process Monitoring Script

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

Bash-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ `test` –≤ Linux-—Å—Ä–µ–¥–µ.  
–°–∫—Ä–∏–ø—Ç:

- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ `systemd timer`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É, –∑–∞–ø—É—â–µ–Ω –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å `test`
- –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–π–¥–µ–Ω ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ `https://test.com/monitoring/test/api`
- –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –±—ã–ª –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω ‚Äî –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ª–æ–≥ `/var/log/monitoring.log`
- –ï—Å–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-—Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî —Ç–∞–∫–∂–µ –ø–∏—à–µ—Ç –≤ –ª–æ–≥

---

## üìÇ –°–æ—Å—Ç–∞–≤ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ monitor_test.sh             # Bash-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ monitor-test.service        # systemd unit-—Ñ–∞–π–ª
‚îî‚îÄ‚îÄ monitor-test.timer          # systemd —Ç–∞–π–º–µ—Ä (–µ–∂–µ–º–∏–Ω—É—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫)
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```bash
# Bash-—Å–∫—Ä–∏–ø—Ç
sudo cp monitor_test.sh /usr/local/bin/
sudo chmod +x /usr/local/bin/monitor_test.sh

# systemd unit –∏ —Ç–∞–π–º–µ—Ä
sudo cp monitor-test.service /etc/systemd/system/
sudo cp monitor-test.timer /etc/systemd/system/
```

### 2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ systemd

```bash
sudo systemctl daemon-reload
```

### 3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–∞–π–º–µ—Ä

```bash
sudo systemctl enable --now monitor-test.timer
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å `test` –∑–∞–ø—É—â–µ–Ω:
  ```bash
  pgrep test
  ```

- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å:
  ```bash
  sudo pkill test
  ./test &  # –∏–ª–∏ –ª—é–±–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
  ```

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥:
  ```bash
  cat /var/log/monitoring.log
  ```

---

## üìÑ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- PID –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤:  
  `/var/run/test_pid`

- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–∞–π–ª:  
  `/var/log/monitoring.log`

---

## üõ† –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `curl` (–¥–ª—è HTTPS-–∑–∞–ø—Ä–æ—Å–∞)

---

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

> –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏ DevOps-–∏–Ω–∂–µ–Ω–µ—Ä–∞.  
> –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: –ë–µ–∫—Ç—Ä—É–º–æ–≤ –¢–∞–º–µ—Ä–ª–∞–Ω

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞

```text
2025-05-19 14:22:01 Process 'test' restarted (old PID: 1234, new PID: 5678)
2025-05-19 14:22:01 Monitoring server unreachable at https://test.com/monitoring/test/api
```

---

## üì¨ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã ‚Äî –ø–∏—à–∏—Ç–µ! –°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è, –∑–∞—â–∏—Ç–∞ –∏ —Ç.–¥.).
